{% macro menu() -%}

<div class="title-bar" data-responsive-toggle="responsive-menu" data-hide-for="medium">
  <button class="menu-icon" type="button" data-toggle="responsive-menu"></button>
  <div class="title-bar-title">Menu</div>
</div>

<div class="top-bar" id="responsive-menu">
  <div class="top-bar-left">
    <ul class="menu">
      <li class="menu-text">Site Title</li>
      <li><a href="{{ url_for('site.index') }}">Home</a></li>

      {% for page in menu_pages %}
        {% if page.published == 1 and page.slug != 'home' %}
          <li>
            <a href="{{ url_for('site.site_page', page=page.slug) }}">{{ page.title }}</a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </div>
  <div class="top-bar-right">
    <ul class="dropdown menu" data-dropdown-menu>
      {% if current_user.is_authenticated %}
      {% if current_user.has_role('editor') %}
        {% if new_comments > 0 %}
          <li>
            <span class="primary badge">New Comments</span>
          </li>
        {% endif %}
      {% endif %}      
        
        <li class="has-submenu">
          <a href="#0">{{ current_user.get_display_name() }}</a>
          <ul class="submenu menu vertical" data-submenu>
            {% if current_user.has_role('editor') %}
              <li><a href="{{ url_for('admin.blog_list') }}">Edit Blog</a></li>
              <li><a href="{{ url_for('admin.page_list') }}">Edit Pages</a></li>
              <li><a href="{{ url_for('admin.comment_list') }}">Edit Comments</a></li>
            {% endif %}
            {% if current_user.is_admin() %}
              <li><a href="{{ url_for('admin.user_list') }}">Edit Users</a></li>
              <li><a href="{{ url_for('admin.role_list') }}">Edit Roles</a></li>
            {% endif %}
            <li><a href="{{ url_for('admin.edit_profile') }}">Edit Profile</a></li>
            <li><a href="{{ url_for('auth.logout_view') }}">Logout</a></li>
          </ul>
        </li>
        {% else %}
        <li>
          <a href="{{ url_for('auth.login_view') }}">Login</a>
        </li>
        {% endif %}
        <li><input type="search" placeholder="Search"></li>
        <li><button type="button" class="button">Search</button></li>
      </ul>
  </div>
</div>
{%- endmacro %}

{% macro footer() -%}
<footer>
 <div class="row expanded">
  <div class="small-12 medium-offset-3 medium-6 columns">
    <span>Â© {{ now.year }}</span>
  </div>
 </div>
</footer>
{%- endmacro %}